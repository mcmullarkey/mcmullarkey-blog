{
  "hash": "f261b4676c34dfd78201ba8deb548342",
  "result": {
    "markdown": "---\ntitle: \"Create All Borough Reports\"\nauthor: \"Michael Mullarkey\"\n---\n\n\n# Load Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(whisker)    # For replacing {{ }} text\nlibrary(tidyverse)  # For function creation + data wrangling\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.3.6      ✔ purrr   0.3.5 \n✔ tibble  3.1.8      ✔ dplyr   1.0.10\n✔ tidyr   1.2.1      ✔ stringr 1.4.1 \n✔ readr   2.1.3      ✔ forcats 0.5.2 \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(glue)       # For programmatic file naming\nlibrary(lubridate)  # For today()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lubridate'\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(here)       # For better file paths\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nhere() starts at /Users/carbonite/Documents/github_r/mcmullarkey-blog\n```\n:::\n\n```{.r .cell-code}\nlibrary(quarto)     # For rendering\n```\n:::\n\n\n# Use Whisker to Modify Template .qmd File with Desired Values\n\n\n::: {.cell}\n\n```{.r .cell-code}\nuse_borough_template <- function(borough, file_name) {\n  \n  raw_qmd <- readLines(file_name) # Reading in full .qmd file\n  \n  filled_qmd <- whisker.render(raw_qmd) # Replace {{}} with func value \n  \n  writeLines(\n    text = filled_qmd,\n    con = glue(\"{borough}_{today()}.qmd\") # Programmatic naming so we don't\n    # just overwrite the same file again and again when we iterate\n  )\n    \n}\n```\n:::\n\n\n# Render .qmd Files Using Programmatic Names\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrender_borough_template <- function(borough, file_name) {\n  \n  quarto_render(\n    input = glue(\"{borough}_{today()}.qmd\")\n  )\n  \n}\n```\n:::\n\n\n# Put Both Functions Together So We Only Have to Make One Function Call\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncreate_borough_report <- function(borough, file_name) {\n  \n  use_borough_template(borough = borough, file_name = file_name)\n  \n  render_borough_template(borough = borough, file_name = file_name)\n  \n}\n```\n:::\n\n\n# Testing the report creation once before going on to programmatic\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Testing the report creation once before going on to programmatic\n\n# create_borough_report(borough = \"Manhattan\", file_name = \"borough_template.qmd\")\n```\n:::\n\n\n# Creating a dataframe of information to map over\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create data frame to map over for borough reports\n\nall_boroughs <- elevators::elevators %>% \n  distinct(borough) %>% \n  deframe()\n\nfile_name_vec <- rep(\"borough_template.qmd\", length(all_boroughs))\n\nboroughs_report_df <- tibble(all_boroughs, file_name_vec)\n```\n:::\n\n\n# Map over all borough reports\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This also could be walk because we're really just looking for side effects!\n\n# Not necessary to do pmap for this example but it's more extensible to if you\n# need to use more than 2 paramters (otherwise can use map or map2)\n\npmap(\n  boroughs_report_df,\n  ~create_borough_report(\n    borough = ..1,\n    file_name = ..2\n  )\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\u001b[1m\u001b[34m[1/2] posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Manhattan_2022-10-25.qmd\u001b[39m\u001b[22m\n\u001b[31m\n\nprocessing file: Manhattan_2022-10-25.qmd\n\u001b[39m\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |......                                                                |   9%\n   inline R code fragments\n\n\n  |                                                                            \n  |.............                                                         |  18%\nlabel: unnamed-chunk-1\n\n  |                                                                            \n  |...................                                                   |  27%\n  ordinary text without R code\n\n\n  |                                                                            \n  |.........................                                             |  36%\nlabel: unnamed-chunk-2 (with options) \nList of 1\n $ message: logi FALSE\n\n\n  |                                                                            \n  |................................                                      |  45%\n  ordinary text without R code\n\n\n  |                                                                            \n  |......................................                                |  55%\nlabel: unnamed-chunk-3 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.............................................                         |  64%\n  ordinary text without R code\n\n\n  |                                                                            \n  |...................................................                   |  73%\nlabel: unnamed-chunk-4 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.........................................................             |  82%\n  ordinary text without R code\n\n\n  |                                                                            \n  |................................................................      |  91%\nlabel: unnamed-chunk-5\n\n  |                                                                            \n  |......................................................................| 100%\n  ordinary text without R code\n\n\n\u001b[31moutput file: Manhattan_2022-10-25.knit.md\n\n\u001b[39m\u001b[31mWarning messages:\n1: Transformation introduced infinite values in continuous y-axis \n2: Transformation introduced infinite values in continuous y-axis \n3: Removed 6026 rows containing non-finite values (stat_smooth). \n4: Removed 6026 rows containing missing values (geom_point). \n5: Transformation introduced infinite values in continuous y-axis \n6: Transformation introduced infinite values in continuous y-axis \n7: Removed 118 rows containing non-finite values (stat_smooth). \n8: Removed 117 rows containing missing values (geom_point). \n\u001b[39m\u001b[1m\u001b[34m[2/2] index.qmd\u001b[39m\u001b[22m\n\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/borough_template.html\u001b[39m\nOutput created: ../../../docs/posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Manhattan_2022-10-25.html\n\n\u001b[1m\u001b[34m[1/2] posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Bronx_2022-10-25.qmd\u001b[39m\u001b[22m\n\u001b[31m\n\nprocessing file: Bronx_2022-10-25.qmd\n\u001b[39m\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |......                                                                |   9%\n   inline R code fragments\n\n\n  |                                                                            \n  |.............                                                         |  18%\nlabel: unnamed-chunk-1\n\n  |                                                                            \n  |...................                                                   |  27%\n  ordinary text without R code\n\n\n  |                                                                            \n  |.........................                                             |  36%\nlabel: unnamed-chunk-2 (with options) \nList of 1\n $ message: logi FALSE\n\n\n  |                                                                            \n  |................................                                      |  45%\n  ordinary text without R code\n\n\n  |                                                                            \n  |......................................                                |  55%\nlabel: unnamed-chunk-3 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.............................................                         |  64%\n  ordinary text without R code\n\n\n  |                                                                            \n  |...................................................                   |  73%\nlabel: unnamed-chunk-4 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.........................................................             |  82%\n  ordinary text without R code\n\n\n  |                                                                            \n  |................................................................      |  91%\nlabel: unnamed-chunk-5\n\n  |                                                                            \n  |......................................................................| 100%\n  ordinary text without R code\n\n\n\u001b[31moutput file: Bronx_2022-10-25.knit.md\n\n\u001b[39m\u001b[31mWarning messages:\n1: Transformation introduced infinite values in continuous y-axis \n2: Transformation introduced infinite values in continuous y-axis \n3: Removed 2510 rows containing non-finite values (stat_smooth). \n4: Removed 2509 rows containing missing values (geom_point). \n5: Transformation introduced infinite values in continuous y-axis \n6: Transformation introduced infinite values in continuous y-axis \n7: Removed 26 rows containing non-finite values (stat_smooth). \n8: Removed 25 rows containing missing values (geom_point). \n\u001b[39m\u001b[1m\u001b[34m[2/2] index.qmd\u001b[39m\u001b[22m\n\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/borough_template.html\u001b[39m\nOutput created: ../../../docs/posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Bronx_2022-10-25.html\n\n\u001b[1m\u001b[34m[1/2] posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Brooklyn_2022-10-25.qmd\u001b[39m\u001b[22m\n\u001b[31m\n\nprocessing file: Brooklyn_2022-10-25.qmd\n\u001b[39m\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |......                                                                |   9%\n   inline R code fragments\n\n\n  |                                                                            \n  |.............                                                         |  18%\nlabel: unnamed-chunk-1\n\n  |                                                                            \n  |...................                                                   |  27%\n  ordinary text without R code\n\n\n  |                                                                            \n  |.........................                                             |  36%\nlabel: unnamed-chunk-2 (with options) \nList of 1\n $ message: logi FALSE\n\n\n  |                                                                            \n  |................................                                      |  45%\n  ordinary text without R code\n\n\n  |                                                                            \n  |......................................                                |  55%\nlabel: unnamed-chunk-3 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.............................................                         |  64%\n  ordinary text without R code\n\n\n  |                                                                            \n  |...................................................                   |  73%\nlabel: unnamed-chunk-4 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.........................................................             |  82%\n  ordinary text without R code\n\n\n  |                                                                            \n  |................................................................      |  91%\nlabel: unnamed-chunk-5\n\n  |                                                                            \n  |......................................................................| 100%\n  ordinary text without R code\n\n\n\u001b[31moutput file: Brooklyn_2022-10-25.knit.md\n\n\u001b[39m\u001b[31mWarning messages:\n1: Removed 3119 rows containing non-finite values (stat_smooth). \n2: Removed 3119 rows containing missing values (geom_point). \n3: Removed 51 rows containing non-finite values (stat_smooth). \n4: Removed 51 rows containing missing values (geom_point). \n\u001b[39m\u001b[1m\u001b[34m[2/2] index.qmd\u001b[39m\u001b[22m\n\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/borough_template.html\u001b[39m\nOutput created: ../../../docs/posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Brooklyn_2022-10-25.html\n\n\u001b[1m\u001b[34m[1/2] posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Queens_2022-10-25.qmd\u001b[39m\u001b[22m\n\u001b[31m\n\nprocessing file: Queens_2022-10-25.qmd\n\u001b[39m\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |......                                                                |   9%\n   inline R code fragments\n\n\n  |                                                                            \n  |.............                                                         |  18%\nlabel: unnamed-chunk-1\n\n  |                                                                            \n  |...................                                                   |  27%\n  ordinary text without R code\n\n\n  |                                                                            \n  |.........................                                             |  36%\nlabel: unnamed-chunk-2 (with options) \nList of 1\n $ message: logi FALSE\n\n\n  |                                                                            \n  |................................                                      |  45%\n  ordinary text without R code\n\n\n  |                                                                            \n  |......................................                                |  55%\nlabel: unnamed-chunk-3 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.............................................                         |  64%\n  ordinary text without R code\n\n\n  |                                                                            \n  |...................................................                   |  73%\nlabel: unnamed-chunk-4 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = \"cs\")'\n\u001b[39m\n  |                                                                            \n  |.........................................................             |  82%\n  ordinary text without R code\n\n\n  |                                                                            \n  |................................................................      |  91%\nlabel: unnamed-chunk-5\n\n  |                                                                            \n  |......................................................................| 100%\n  ordinary text without R code\n\n\n\u001b[31moutput file: Queens_2022-10-25.knit.md\n\n\u001b[39m\u001b[31mWarning messages:\n1: Removed 1639 rows containing non-finite values (stat_smooth). \n2: Removed 1639 rows containing missing values (geom_point). \n3: Removed 27 rows containing non-finite values (stat_smooth). \n4: Removed 27 rows containing missing values (geom_point). \n\u001b[39m\u001b[1m\u001b[34m[2/2] index.qmd\u001b[39m\u001b[22m\n\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/borough_template.html\u001b[39m\nOutput created: ../../../docs/posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Queens_2022-10-25.html\n\n\u001b[1m\u001b[34m[1/2] posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Staten Island_2022-10-25.qmd\u001b[39m\u001b[22m\n\u001b[31m\n\nprocessing file: Staten-Island_2022-10-25.rmarkdown\n\u001b[39m\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |......                                                                |   9%\n   inline R code fragments\n\n\n  |                                                                            \n  |.............                                                         |  18%\nlabel: unnamed-chunk-1\n\n  |                                                                            \n  |...................                                                   |  27%\n  ordinary text without R code\n\n\n  |                                                                            \n  |.........................                                             |  36%\nlabel: unnamed-chunk-2 (with options) \nList of 1\n $ message: logi FALSE\n\n\n  |                                                                            \n  |................................                                      |  45%\n  ordinary text without R code\n\n\n  |                                                                            \n  |......................................                                |  55%\nlabel: unnamed-chunk-3 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'loess' and formula 'y ~ x'\n\u001b[39m\n  |                                                                            \n  |.............................................                         |  64%\n  ordinary text without R code\n\n\n  |                                                                            \n  |...................................................                   |  73%\nlabel: unnamed-chunk-4 (with options) \nList of 2\n $ message: logi FALSE\n $ warning: logi FALSE\n\n\u001b[31m`geom_smooth()` using method = 'loess' and formula 'y ~ x'\n\u001b[39m\n  |                                                                            \n  |.........................................................             |  82%\n  ordinary text without R code\n\n\n  |                                                                            \n  |................................................................      |  91%\nlabel: unnamed-chunk-5\n\n  |                                                                            \n  |......................................................................| 100%\n  ordinary text without R code\n\n\n\u001b[31moutput file: Staten-Island_2022-10-25.knit.md\n\n\u001b[39m\u001b[31mWarning messages:\n1: Removed 76 rows containing non-finite values (stat_smooth). \n2: Removed 76 rows containing missing values (geom_point). \n3: Removed 1 rows containing non-finite values (stat_smooth). \n4: Removed 1 rows containing missing values (geom_point). \n\u001b[39m\u001b[1m\u001b[34m[2/2] index.qmd\u001b[39m\u001b[22m\n\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/create_borough_reports.html\u001b[39m\n\u001b[33mWARNING: Unable to read listing item description from posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/borough_template.html\u001b[39m\nOutput created: ../../../docs/posts/2022_10_20_ultra_parameterized_reports/ultra_parameter_example/Staten Island_2022-10-25.html\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\nNULL\n\n[[2]]\nNULL\n\n[[3]]\nNULL\n\n[[4]]\nNULL\n\n[[5]]\nNULL\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}